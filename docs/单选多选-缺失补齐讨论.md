# 单选/多选题 · 与问卷星差异补齐讨论

> 基于此前与问卷星的对标结论，列出尚未实现的能力，按**实现量级**与**是否已在第二步规划**分类，便于排期与取舍。

---

## 一、已规划在第二步的能力（逻辑类）

这些在《问卷第二步-范围说明》中已明确，**不在此次「补齐」里单独做**，随第二步一起上即可。

| 能力 | 说明 | 第二步文档 |
|------|------|------------|
| **跳题** | 单选题（及下拉单选）：每选项可设「跳转到第 N 题」或「结束答卷」 | §2.1 跳题逻辑 |
| **题目关联（显隐）** | 某题显示与否依赖前题选项；支持批量设置 | §2.2 题目关联逻辑 |
| **选项关联（选项显隐）** | 同一题内部分选项依前题选项显隐 | §2.3 选项关联逻辑 |
| **选项引用** | 本题选项来源于前题（如多选）的被选选项 | §2.4 选项引用逻辑 |
| **管道引用 [q1]** | 题干中引用前题答案文本；仅单选、多选、单项填空可被引用 | §2.6 多条件组合末段 |

**结论**：以上**不在此次补齐范围**，按第二步排期做即可。

---

## 二、建议本次可补齐（选项/题目级，不改逻辑引擎）

### 2.1 选项说明（可嵌网址、点击弹出）★问卷星

| 项目 | 内容 |
|------|------|
| **含义** | 每个选项除「选项文案」外，可再填「选项说明」；说明里可写网址，勾选「点击后弹出」则填写页点击可弹窗打开该链接。 |
| **数据** | `config.options[i]` 增加 `description?: string`、`descriptionOpenInPopup?: boolean`（或统一一个 `optionDescription` 对象）。 |
| **编辑** | 选项行增加「说明」输入框（可选）+「说明中的链接点击后弹出」勾选。 |
| **填写** | 在选项旁展示说明链接/图标，点击按配置打开新标签或弹窗。 |
| **量级** | 中（编辑 + 填写 + 存储，无后端表结构变更，仅 config JSON 扩展）。 |

**建议**：可做，与问卷星「选项说明」对齐，需求场景多（如投票题候选人介绍链接）。

---

### 2.2 默认选中项

| 项目 | 内容 |
|------|------|
| **含义** | 单选题可预设一个选项为默认选中；多选可预设多个；填写页加载时即选中，用户可改。 |
| **数据** | 单选题：`config.defaultOptionIndex?: number`；多选：`config.defaultOptionIndices?: number[]`。 |
| **编辑** | 题目级增加「默认选中」：单选为下拉选某一选项，多选为多选勾选。 |
| **填写** | 根据 default 预填表单；提交逻辑不变。 |
| **量级** | 小。 |

**建议**：可做，实现简单，问卷星有、部分场景有用。

---

## 三、形态扩展（工作量相对大）

### 3.1 单选填空题（每选项后可跟填空）

| 项目 | 内容 |
|------|------|
| **含义** | 不仅「其他」可带填空，**任意选项**都可配置「选择后显示一个填空框」。问卷星为单独题型「单选填空题」。 |
| **数据** | `config.options[i].allowFill?: boolean`（或已有 `allowFill` 扩展为每选项）。当前仅全局 `hasOtherOption` + `otherAllowFill`。 |
| **编辑** | 每个选项后增加「允许填空」勾选；若勾选，可再选填空为单行/多行等（可先只做单行）。 |
| **填写** | 选某选项时，若该选项 allowFill，展示对应输入框；提交时需存「选项下标 + 该选项填空内容」。 |
| **答卷/统计** | ResponseItem 需能表达「选项 i + 其填空 text」；多选项填空时可能需多条 item 或结构化 value。 |
| **量级** | 中～大（涉及编辑、填写、提交结构、统计展示）。 |

**建议**：先明确是否强需求；若做，可先做「每选项可勾选允许填空 + 单行填空」，再考虑多行/校验。

---

### 3.2 单选题（图片选项）

| 项目 | 内容 |
|------|------|
| **含义** | 选项为图片，填写时点选图片作答；可带少量文字说明。 |
| **数据** | `config.options[i].imageUrl?: string`（或单独存图，表/存储需支持文件或 URL）。 |
| **编辑** | 选项行支持「上传图片」或填图片 URL；列表展示缩略图。 |
| **填写** | 以图片为主展示选项，点击选中；需考虑移动端与加载。 |
| **量级** | 大（上传/存储/URL、编辑 UI、填写 UI、统计展示可能需区分「图片选项」）。 |

**建议**：可放在后续迭代或第三步；若资源有限可先不做，用「选项说明 + 链接到图片」替代部分场景。

---

## 四、建议不做或延后的

| 能力 | 说明 |
|------|------|
| **逻辑类（跳题/显隐/引用/管道引用）** | 已在第二步规划，不重复做。 |
| **图片选项** | 实现成本高，可延后或用「选项说明 + 外链图片」临时替代。 |

---

## 五、推荐补齐顺序（供讨论）

1. **默认选中项**（小，收益清晰）  
2. **选项说明（含网址、点击弹出）**（中，对齐问卷星常用能力）  
3. **单选填空题（每选项可填空）**（中～大，视需求优先级决定是否在本阶段做）  
4. **单选题（图片选项）**（大，建议后续版本）

若你希望「先做最小集合」，可只做 **1 + 2**；若希望尽量对齐问卷星单选形态，再加 **3**。需要的话我可以按你选的顺序，把 1 和 2 拆成具体接口与前端改动点（含 config 字段与编辑/填写页改动清单）。
