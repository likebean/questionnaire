# 问卷第一步 - 设计讨论

> 界面交互参考问卷星；范围以《问卷第一步-范围说明.md》为准。技术栈见《技术栈与架构说明.md》（Next.js 16 + React 19 + Tailwind + Radix UI）。  
> **核实说明**：本文「问卷星参考」已结合问卷星帮助中心（wjx.cn/help）及网络调研核对；问卷星产品可能更新，以官网为准。

---

## 一、整体信息架构（参考问卷星）

| 模块 | 说明 | 问卷星参考（已核实） |
|------|------|----------------------|
| **我的问卷** | 入口列表：我创建的（+ 状态筛选）；填写通过链接打开 | 问卷星「我的问卷」仅为创建者问卷列表，按状态筛选；填写者通过链接/二维码/邀请打开（帮助 catid=75 等） |
| **问卷编辑** | 左侧题目列表 + 右侧题目编辑；顶部问卷标题/说明；保存草稿、发布 | 问卷星：**左侧题目列表**、**右侧编辑区**，点击题目进入编辑、可拖拽排序（帮助 435、网络资料）；入口为「设计问卷」→「修改问卷」（帮助 192、262） |
| **问卷设置** | 防重复、匿名、开始/结束时间、感谢语 | 问卷星「设计问卷」下有独立**问卷设置**（帮助 14、catid=11）：作答次数限制、时间、跳转、密码等；防重复为 **IP/同一电脑(Cookies)/微信** 等（帮助 280），**无**「按登录用户ID」—本系统采用登录用户ID 为高校 CAS 差异化 |
| **发放** | 固定链接、复制链接 | 问卷星：问卷链接 + **二维码**（帮助 358 等）、微信/邮件/短信邀请；第一步仅做链接+复制 |
| **填写页** | 按题序展示、必填校验、提交后感谢语 | 问卷星：默认**一页多题**（帮助 266）；可设「一题一页」；题号、题干、选项/输入框、提交后感谢或自定义结果页（帮助 107、797） |
| **答卷与统计** | 答卷列表、单条详情、单题统计（图+数）、导出 Excel | 问卷星：「**分析&下载**」下分「**统计&分析**」与「**查看下载答卷**」两模块（帮助 192）；查看原始答卷、下载 Excel/SPSS、饼图柱状图等 |

---

## 二、页面与路由设计

### 2.1 路由结构（建议）

| 路径 | 说明 | 备注 |
|------|------|------|
| `/surveys` | 我的问卷列表 | 已有页面，需扩展：我创建的问卷列表 + 状态筛选（全部/草稿/收集中/已暂停/已结束）、搜索、排序，同问卷星 |
| `/surveys/new` | 创建问卷（新建草稿并进入编辑） | 新建后跳转 `/surveys/[id]/edit` |
| `/surveys/[id]/edit` | 问卷编辑页 | 左题目列表 + 右编辑区；顶部标题/说明；底部/顶部保存、发布 |
| `/surveys/[id]/settings` | 问卷设置 | 防重复、匿名、开始/结束时间、感谢语（可考虑与编辑合并或独立） |
| `/surveys/[id]/publish` 或 设置内 | 发放：链接展示与复制 | 第一步无二维码，仅固定链接 + 复制按钮 |
| `/surveys/[id]/responses` | 答卷列表 | 分页、摘要、点进单条详情 |
| `/surveys/[id]/analytics` 或 `/surveys/[id]/stats` | 单题统计 + 导出 | 单选/多选：饼图或柱状图；量表：分布；填空：答案列表；导出 Excel |
| `/fill/[id]` 或 `/s/[shortCode]` | 填写页（公开链接） | 不要求登录时可匿名填；必填校验、感谢页 |

**问卷星参考**：问卷星在「设计问卷」下有独立的「问卷设置」分类（防重复、时间、跳转、公开级别、密码等），与题目编辑分开；管理后台流程为「设计问卷 → 完成编辑并发布 → 分析&下载」。故**设置采用独立入口**（如从列表进「设置」或编辑页顶部 Tab「设计 | 设置」），不与题目编辑混在同一屏。

### 2.2 「我的问卷」列表（对齐问卷星）

**本系统与问卷星一致**：仅**创建者视角**的问卷列表——自己创建的问卷，按状态（全部/草稿/收集中/已暂停/已结束）筛选，支持搜索、排序；列表进设计/设置/发放/统计。填写者通过**链接**（第一步仅做链接+复制）打开问卷填写，不做「待我填写的」Tab。

- **表格**：列——问卷标题、状态、回收数（可选）、更新时间；操作——设计问卷、设置、发放、统计/答卷、复制、删除。
- **顶部**：筛选（全部/草稿/收集中/已暂停/已结束）、搜索（按标题）、排序（按时间）。

---

## 三、编辑页布局（对齐问卷星 + 范围说明）

### 3.1 布局结构

```
+------------------------------------------------------------------+
|  [问卷标题] 可编辑单行                                    [保存草稿] [发布] |
|  问卷说明（选填，多行纯文本）                                          |
+------------------------------------------------------------------+
| 题目列表（左）     |  当前题目编辑区（右）                              |
| ------------------|--------------------------------------------------|
| 1 题干缩写...      |  题目标题 * [________________]                      |
| 2 题干缩写...      |  题目说明（选填）[________________]                  |
| 3 题干缩写...      |  题型：[单选题 ▼]  必填 [√]                         |
| + 添加题目         |  选项：  ○ A. [____]  [+添加] [其他(可填空)]          |
|                    |        [上移][下移] [复制题目][删除题目]              |
+------------------------------------------------------------------+
```

- **左侧**：题目列表，题号 + 题干缩写（过长截断）；点击选中；**拖拽或上移/下移**排序；底部「添加题目」。
- **右侧**：当前题目——题干、题型、必填、选项（单选/多选）/填空行数/量表刻度与端点文案；题目操作：上移、下移、复制、删除。
- **顶部**：问卷标题（必填）、问卷说明（选填）；全局操作：保存草稿、发布（草稿时）。收集中/已暂停时可为「保存」+ 强提示（影响已回收数据）。

### 3.2 题型在编辑区的表现（第一步仅四种）

| 题型 | 编辑区配置项 |
|------|--------------|
| 单选题 | 选项列表：增删改、排序；可勾选「其他」且允许填空 |
| 多选题 | 同上 + 最少选 N 项、最多选 N 项 |
| 填空题 | 单行/多行切换；占位提示（placeholder）；必填 |
| 量表题 | 刻度数 1–N（如 5/7/10）；左/右端点文案 |

### 3.3 问卷星式交互细节（可选采纳）

- 左侧题目项 hover 显示更多操作（复制/删除）或选中后右侧再操作。
- 新增题目时默认插入当前选中题下方；未选题时插到末尾。
- 选项可拖拽排序或仅上移下移（第一步二选一即可）。

---

## 四、问卷设置（防重复、匿名、时间、感谢语）

- **防重复**：开关「每人限填一次」；本系统按**登录用户 ID** 限制（高校 CAS 场景）；未登录不可填（除非开启匿名）。**问卷星**为 IP/同一电脑(Cookies)/微信等（帮助 280），无「按登录用户ID」。
- **匿名**：开关「允许匿名填写」；与防重复组合逻辑：匿名时可不记录 user_id，仅计条数；非匿名则必须登录且按 user_id 防重复。问卷星有匿名/身份相关设置。
- **开始时间 / 结束时间**：两个日期时间选择器，选填；到结束时间后填写页提示「已截止」；未到开始时间提示「未到开始时间」。问卷星在问卷设置中有时间/有效期（帮助 14、201）。
- **感谢语**：多行文本，提交成功后展示。问卷星为「自定义填写完成问卷后处理规则」/自定义结果页（帮助 107、797）。

可放在独立「设置」页，或编辑页内「问卷设置」折叠面板。

---

## 五、发放与填写

### 5.1 发放

- 发布后展示**固定链接**（如 `https://xxx/fill/123` 或短码）；**复制链接**按钮。
- 第一步不做：二维码、iframe、自定义来源参数。

### 5.2 填写页（参考问卷星）

- 顶部：问卷标题、问卷说明（若有）。
- 题目顺序展示；每题：题号、题干、必填星号、输入控件（单选/多选/填空/量表）。
- 量表题：1–N 一排单选或滑块，左侧文案、右侧文案。
- 底部：**提交**按钮；提交前前端校验必填，不通过提示并定位到首道未填题。
- 提交成功：展示感谢语，可加「关闭」或返回入口。

### 5.3 异常与限制提示（统一文案）

- 问卷已删除、未到开始时间、已过结束时间、已填过（防重复）：统一明确提示，不进入答题区。

---

## 六、答卷与统计

### 6.1 答卷列表

- 表格列：提交时间、用时（可选）、部分题目答案摘要（如前两题）；分页；点击行进入**单条答卷详情**（逐题答案）。

### 6.2 单题统计

- **单选/多选**：各选项人数、占比；**饼图或柱状图**至少一种。
- **量表**：平均分、各分值人数/分布（柱状或表格）。
- **填空**：答案列表（可分页），第一步不做词云。

### 6.3 导出

- 按钮「导出 Excel」：每行一条答卷，每列一题；可含提交时间等元数据；导出范围第一步固定为「全部答卷」。

---

## 七、状态与操作（与范围说明一致）

- **状态**：草稿、收集中、已暂停、已结束。
- **操作**：保存草稿、发布、暂停回收、重新开启、结束问卷、复制问卷、删除问卷。
- 发布后修改题目：收集中/已暂停允许编辑题目；保存时**强提示**「会影响已回收数据与统计，是否继续？」。

---

## 八、问卷星网络调研结论与设计定稿

以下结论基于问卷星帮助中心（www.wjx.cn/help）、help 文档及网络调研核实，用于定稿第一步设计。

### 8.1 设置入口（已核实）

- **问卷星**：「设计问卷」下有独立「**问卷设置**」分类（帮助 14 问卷设置概述，catid=11），含作答次数限制、时间、跳转、公开级别、密码等；入口为设计问卷→问卷设置→权限设置/答题设置等，与题目编辑**分开**。
- **定稿**：采用**独立设置入口**。列表行操作有「设置」跳转 `/surveys/[id]/settings`，与编辑页分开。

### 8.2 编辑页「保存」与发布后修改（已核实）

- **问卷星**：流程为「添加和编辑题目 → **完成编辑并发布**」（帮助 192）；管理后台可「发布问卷和停止问卷」（帮助 192）。发布后是否仍可进编辑改题目，帮助未明确；本系统范围说明允许收集中/已暂停时修改并强提示。
- **定稿**：草稿时仅「保存草稿」「发布」；收集中/已暂停时显示「保存」+ 强提示「会影响已回收数据与统计，是否继续？」。

### 8.3 填写页：一页到底 vs 分页（已核实）

- **问卷星**：默认**一页多题**。「一题一页」需在编辑里选「**分页**」→「一题一页」才生效（帮助 266）；考试模式默认一题一页。
- **定稿**：第一步**一页到底**，与问卷星默认一致；第二步再做分页。

### 8.4 我的问卷列表（已核实）

- **问卷星**：仅**我创建的**问卷列表，按状态筛选，表格+行操作（发布/停止、复制、删除、分析&下载）；填写者通过链接/二维码/邀请打开。
- **本系统定稿**：与问卷星一致，仅「我创建的」列表 + 状态筛选/搜索/排序；不做「待我填写的」Tab；填写统一通过链接打开。

### 8.5 答卷与统计（已核实）

- **问卷星**：「**分析&下载**」下分「**统计&分析**」与「**查看下载答卷**」两模块（帮助 192；查看&下载 catid=21/22，统计分析 catid=50/51 等）。
- **定稿**：分开两路由 `/surveys/[id]/responses`、`/surveys/[id]/analytics`，与问卷星对应。

### 8.6 移动端（已核实）

- **问卷星**：支持手机浏览器、微信填写；可**单独设计手机版问卷外观**（帮助 156）；有官方 APP。
- **定稿**：第一步填写页响应式；编辑端桌面优先。

---

## 九、第一步设计定稿汇总

| 项 | 定稿 |
|----|------|
| 设置入口 | 独立「设置」页 `/surveys/[id]/settings`，列表行操作与编辑区均可进入 |
| 编辑页保存 | 草稿：保存草稿、发布；收集中/已暂停：显示「保存」+ 保存时强提示影响数据 |
| 填写页 | 一页到底，底部提交；第二步再做分页 |
| 我的问卷列表 | 仅我创建的：表格+行操作、状态筛选、搜索、排序（同问卷星）；填写通过链接打开 |
| 答卷与统计 | 两页：`/surveys/[id]/responses`、`/surveys/[id]/analytics` |
| 移动端 | 填写页响应式；编辑端桌面优先 |

以上可作为接口与前端组件设计的依据；若需微调再改本文档。

**进一步展开**：数据模型、REST API 清单、各页面详细规格（区块/状态/校验/交互）、前端组件结构与关键流程见《问卷第一步-设计详稿.md》。

---

**问卷星核实汇总**（网络调研 + 帮助中心）：编辑页左右分栏（左题目列表、右编辑区）、入口「设计问卷」→「修改问卷」；问卷设置独立入口（帮助 14、catid=11）；防重复为 IP/同一电脑/微信（帮助 280），本系统采用登录用户ID 属高校差异化；填写默认一页多题（帮助 266）；分析&下载分「统计&分析」与「查看下载答卷」；发放含链接与二维码；提交后感谢/自定义结果页（帮助 107、797）；移动端支持、手机版外观（帮助 156）。以上以问卷星官网与帮助为准。
