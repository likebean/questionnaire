# 问卷第一步 - 范围说明

> **原则**：分步做，每一步是完整可用的闭环；本步内对照《功能规格.md》不遗漏，未列入的放入后续步骤。

**第一步目标**：用户能创建一份问卷（含标题、说明、若干题目）、设置防重复/匿名/截止时间/感谢语、发布后通过**链接**填报，支持暂停回收与重新开启、收集中可修改题目（含提示），具备权限的用户能查看答卷列表、单题统计并导出 Excel；支持复制问卷。**不包含**跳题逻辑、矩阵题、交叉分析等，留到后续步骤。

---

## 一、问卷基础与状态（对应功能规格 三、3.1；七、7.1；一、1.2）

| 功能点 | 规格出处 | 第一步实现要求 |
|--------|----------|----------------|
| 问卷标题 | 3.1 问卷基础信息 | 必填，单行文本 |
| 问卷说明/前言 | 3.1 | 选填，纯文本（首步不做富文本） |
| 问卷状态 | 3.1、7.1 问卷状态与生命周期 | **草稿**、**收集中**、**已暂停**、**已结束** 四种；草稿按权限可见可编辑、不可填写；收集中可填；已暂停不可填但可重新开启；已结束不可再提交 |
| 归属与权限 | 一、1.3 权限与归属 | 每条问卷归属创建者；**编辑/查看/导出/删除/复制等按角色权限**，有相应权限的用户可操作 |
| 我的问卷列表 | 一、1.2 个人中心 | 入口「我的问卷」；列表支持按状态筛选：**全部 / 草稿 / 收集中 / 已暂停 / 已结束**；支持按标题/时间搜索、按时间排序 |
| 问卷操作 | 三、3.9 题目与问卷操作 | **保存草稿**、**发布**（草稿→收集中）、**暂停回收**（收集中→已暂停）、**重新开启**（已暂停→收集中）、**结束问卷**（收集中/已暂停→已结束）、**复制问卷**（生成新草稿，含题目与设置，不复制答卷）、**删除问卷**（软删除或物理删除，依实现约定） |

**与规格对齐说明**：  
- 3.1 中的「问卷封面图」「应用类型」第一步不做；  
- 7.1 中的「暂停回收」与「重新开启」已纳入第一步：状态区分「已暂停」，收集中可操作「暂停回收」，已暂停可操作「重新开启」。

---

## 二、题目与题型（对应功能规格 三、3.2.1、3.3、3.4、3.9）

### 2.1 支持的题型（第一步仅此四种）

| 题型 | 规格出处 | 第一步实现要求 |
|------|----------|----------------|
| 单选题 | 3.2.1 基础题型 | 选一项；选项可增删改、排序；支持「其他」选项且可带填空（选项 + 是否允许填空） |
| 多选题 | 3.2.1 | 选多项；可设置**最少选 N 项**、**最多选 N 项**；选项可增删改、排序；支持「其他」+ 填空 |
| 填空题 | 3.2.1、3.4 | **单行**与**多行**两种；占位提示（placeholder）；是否必填；不做数字/邮箱等格式校验（后续步骤） |
| 量表题 | 3.2.1、3.4 | 线性量表，**1–N 可配置**（N 如 5/7/10，创建题目时选择或输入）；左右端点文案可填；每题可设不同刻度 |

### 2.2 题目通用设置

| 功能点 | 规格出处 | 第一步实现要求 |
|--------|----------|----------------|
| 题目标题（题干） | 3.3 题目通用设置 | 必填，纯文本 |
| 题目说明/备注 | 3.3 | 选填，纯文本 |
| 是否必填 | 3.3 | 每题可勾选「必填」 |
| 题目序号 | 3.3 | 自动编号（1、2、3…），可自动随增删/排序变化 |
| 选项编辑 | 3.3 | 增删改、排序（上移/下移或拖拽）；选项「其他」+ 后续填空 |
| 题目操作 | 3.9 | **新增题目**、**复制题目**、**删除题目**、**上移/下移**（或拖拽排序） |

**第一步不做**（明确排除，避免范围蔓延）：  
- 3.2.1 中下拉、矩阵、排序、比重、日期、时间、上传、段落、分页符、表格、投票、多级下拉等题型；  
- 3.3 选项引用、计算公式/赋值、数学公式；  
- 3.4 选项随机、填空校验类型、矩阵专属设置等；  
- 3.5 逻辑设置（跳题、显示/隐藏）整块不做。

---

## 三、问卷级设置（对应功能规格 三、3.6；四、4.4、4.5；二、2.6）

| 功能点 | 规格出处 | 第一步实现要求 |
|--------|----------|----------------|
| 防重复 | 3.6、4.4、2.6 填写端与防重复 | **每人限填一次**：按**登录用户 ID** 限制；未登录不允许填写（除非匿名问卷，见下） |
| 匿名 | 3.6、2.6 匿名与实名 | 问卷级开关：**允许匿名** 或 **仅登录用户可填**；匿名时不记录填报人（或仅记录「已填」条数，不关联 user_id） |
| 开始时间、结束时间 | 3.6、4.5.1 时间与总量 | **开始时间**、**结束时间**（可选填）；到结束时间后禁止再提交，并提示「已截止」；未到开始时间提示「未到开始时间」 |
| 感谢语/结束页 | 3.6 提交设置 | 提交成功后展示**感谢语**（可配置一段文字） |

**第一步不做**：  
- 分页、单次填写限时、最大回收份数、配额规则（3.6、4.5）；  
- 答题时间控制、甄别页、自动筛选（4.6）；  
- 问卷密码、红包/抽奖（3.6）。

---

## 四、编辑页布局与操作（对应问卷星编辑页 + 功能规格 3.9）

| 功能点 | 规格出处 | 第一步实现要求 |
|--------|----------|----------------|
| 编辑页布局 | 问卷功能设计参考 二 | **左侧**：题目列表（题号 + 题干缩写），可点击选题、**拖拽或上移下移排序**；**右侧/中间**：当前题目编辑区（题干、题型、选项/设置）；**顶部**：问卷标题、问卷说明；**底部/顶部**：保存草稿、完成编辑 |
| 保存与发布 | 3.9 | 编辑中可**保存草稿**；从草稿可**发布**（变为收集中）；收集中可修改设置（如结束时间）与题目（见「发布后题目修改」） |
| 发布后题目修改 | 3.9 问卷发布后结构变更策略 | **收集中与已暂停时允许增删改题目**；进入编辑并保存题目变更时**强提示**「会影响已回收数据与统计，是否继续？」；统计与导出按**当前题目结构**计算，历史答卷中已删除的题目在统计/导出中留空或标注「题目已删除」；新增题目在旧答卷中无数据，统计时计为 0 或忽略。 |

---

## 五、发放与填写（对应功能规格 四、4.1、4.7、4.8；七、7.2）

| 功能点 | 规格出处 | 第一步实现要求 |
|--------|----------|----------------|
| 问卷链接 | 4.1.1 链接与二维码 | 每个已发布问卷一个**固定链接**（如 `/survey/fill/{id}` 或短码）；发布后展示链接，可**复制链接**；第一步不做二维码、不做自定义来源参数 |
| 填写入口 | 4.7、问卷功能设计参考 七 | 「我的问卷」仅展示**我创建的**问卷（进入编辑/设置/统计）；填写通过**问卷链接**打开（分享链接给他人，登录后打开链接即填）。不做「待我填写的」列表 |
| 填写页展示 | 4.7 填写端体验 | 按题目顺序展示；单选题/多选题/填空题/量表题渲染与输入方式符合题型；必填题未填时提交校验并提示 |
| 提交与感谢页 | 4.7 | 提交前校验必填；提交成功后展示配置的**感谢语**；提交失败（网络/校验）提示 |
| 异常提示 | 7.2 异常与限制 | 问卷已删除、未到开始时间、已过结束时间、防重复（已填过）、回收已满（若本步不做最大回收数则无此项）时，**统一明确提示** |

**第一步不做**：  
- 二维码、iframe 嵌入、自定义链接参数、预填（4.1）；  
- 短信/邮件/微信邀请（4.2）；  
- 断点续答、每题自动保存、允许修改已提交答卷（4.7）；  
- 答卷来源分析（4.8）；  
- 样本名单与完成率（4.9）。

---

## 六、答卷与统计导出（对应功能规格 五、5.1、5.3、5.6）

| 功能点 | 规格出处 | 第一步实现要求 |
|--------|----------|----------------|
| 答卷列表 | 5.1 答卷列表与查看 | 具备该问卷查看权限的用户可见**答卷列表**；列表字段至少：**提交时间**、**用时**（可选）、**部分题目答案摘要**（如前两题）；支持**分页**；可**点击单条查看详情**（整份答卷逐题答案） |
| 单题统计 | 5.3 单题统计与图表 | **单选/多选**：各选项人数、占比；**饼图或柱状图**（至少一种）；**量表**：平均分、各分值人数/分布；**填空**：答案列表（可分页），不做词云 |
| 导出原始答卷 | 5.6 导出 | **导出 Excel**：每行一条答卷，每列一题（单选/多选存选项文本或序号均可，约定即可）；可带提交时间等元数据列；导出范围为「全部答卷」 |

**第一步不做**：  
- 答卷删除、标记无效、编辑答卷（5.1）；  
- 分类统计、交叉分析、自定义查询（5.2、5.4、5.5）；  
- 按选项序号/文本切换、SPSS、调查报告、统计快照（5.6）；  
- 大数据量异步统计、流式导出（5.7 大数据量性能策略）可后续再加。

---

## 七、与功能规格其他章节的对应关系

- **一、用户与账号**：已实现登录、用户体系；本步用问卷归属与**角色权限**、「我的问卷」列表，不新增账号能力。  
- **二、高校对接**：防重复按登录用户 ID（2.6）；匿名与实名按问卷设置（2.6）；CAS 与院系已存在，本步不新增。  
- **三、问卷编辑**：已按上 二、三、四 节逐条对应 3.1–3.4、3.6、3.9；3.5 逻辑、3.7 外观、3.8 批量、3.10 AI、3.12 考试均不在第一步。  
- **四、发放与回收**：已按第五节对应 4.1、4.4、4.5.1、4.7、4.8 部分；其余 4.2、4.3、4.5.2、4.6、4.9 不在第一步。  
- **五、数据与统计**：已按第六节对应 5.1、5.3、5.6 最简子集；5.2、5.4、5.5、5.7、5.8 等不在第一步。  
- **六、模板与复用**：仅做**复制问卷**（本账号内），不做从模板创建、从文本导入、企业模板库。  
- **七、其他**：7.1 状态、7.2 异常已纳入；7.3 管理端、7.4 帮助、7.5 商业化、7.6 系统通知均不在第一步。  
- **八、P0 建议**：第一步覆盖 P0 中与「调查问卷」相关的核心项；P0 中逻辑跳题、复制问卷等，复制问卷已纳入第一步，跳题放在第二步。

---

## 八、第一步交付清单（开发可勾选）

- [ ] **问卷**：表结构；CRUD 接口；标题、说明、状态、创建者、开始/结束时间、匿名开关、感谢语；列表（筛选、排序）、发布/暂停回收/重新开启/结束/复制/删除。  
- [ ] **题目**：表结构；题目与问卷关联；题型（单选/多选/填空/量表）；题干、必填、选项（含「其他」+填空）、多选上下限、**量表 1–N 可配置**与端点文案；题目排序、增删改复制。  
- [ ] **问卷设置**：防重复（按用户 ID）、匿名、开始/结束时间、感谢语；保存与校验。  
- [ ] **编辑页**：左侧题目列表 + 右侧题目编辑；问卷标题/说明编辑；保存草稿；发布前校验（至少一题、必填项完整等）。  
- [ ] **填写**：固定链接；填写页按题渲染、必填校验、提交；感谢页；未到开始/已截止/防重复等提示。  
- [ ] **我的问卷**：我创建的（列表 + 状态筛选 + 进入编辑/设置/统计）；填写通过链接打开，不做待我填写的列表。  
- [ ] **答卷**：提交落库；答卷列表（分页、摘要、单条详情）；单题统计（单选/多选/量表/填空）；导出 Excel。  
- [ ] **权限**：问卷编辑/查看/导出/删除按**角色权限**，有相应权限的用户可操作；填写端按登录与匿名设置控制。

---

## 九、第二步与第三步（共 3 步，本步明确不做的）

> **整体规划**：问卷功能**共分 3 步**。第一步为基础闭环；第二步为逻辑、题型与统计增强；第三步为进阶能力与运维。

- **第二步**：详见《问卷第二步-范围说明.md》。在第一步之上完成：跳题与题目显隐、选项显隐与选项引用、必填逻辑与多条件；下拉题、矩阵题、排序/日期/时间/段落/分页符；分页、单次限时、最大回收数；答卷标记无效、编辑答卷与修改记录、按答案筛选；分类统计与交叉分析；复制问卷含上述全部。
- **第三步**：详见《问卷第三步-范围说明.md》。逻辑与题型进阶（反向关联、随机抽题、循环题、公式与评分、条件嵌套；比重/上传/表格/投票等）、配额规则、外观与主题、从模板/文本创建与题库、操作日志与审计、考试与测评、高级分析与 API 等。

---

**文档状态**：与《功能规格.md》逐条对照后的第一步范围说明，用于评审与开发落地；若需增删项，直接修改本表并同步更新功能规格中的优先级说明。
