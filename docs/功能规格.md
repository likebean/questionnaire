# 问卷系统 - 完整功能规格

> 仿问卷星，仅做功能整理，不涉及实现细节。按模块逐条列出，便于后续排期与开发。

---

## 一、用户与账号

### 1.1 注册与登录
- 注册：邮箱 + 密码（含确认密码）、可选手机号
- 登录：邮箱/手机号 + 密码
- 忘记密码：通过邮箱/手机验证重置
- 登录态：Session/Token，支持「记住我」时长
- 未登录可访问：仅填写问卷；创建/编辑/数据需登录

### 1.2 个人中心
- 基本信息：昵称、头像、邮箱、手机（可修改，需验证）
- 修改密码
- 我的问卷列表：全部/草稿/收集中/已结束，支持搜索、按时间排序
- 配额与用量（若做收费）：问卷数量、回收份数、有效期等展示

### 1.3 权限与归属
- 每条问卷归属一个用户（创建者）
- 仅创建者可：编辑问卷、查看/导出数据、修改发放设置、复制/删除问卷
- 后续可扩展：协作成员、只读/编辑权限（可选）

---

## 二、问卷编辑

### 2.1 问卷基础信息
- 问卷标题（必填）
- 问卷说明/前言（富文本或纯文本，选填）
- 问卷封面图（可选）
- 问卷状态：草稿、收集中、已结束（手动结束或按结束时间自动结束）

### 2.2 题型列表（完整）

| 序号 | 题型           | 说明 |
|------|----------------|------|
| 1    | 单选题         | 单选一项，可配选项跳题 |
| 2    | 多选题         | 多选，可限制最少/最多项数 |
| 3    | 单选下拉       | 下拉框单选 |
| 4    | 多选下拉       | 下拉框多选 |
| 5    | 填空题         | 单行文本 |
| 6    | 多行填空题     | 多行文本/段落 |
| 7    | 矩阵单选题     | 行×列，每行选一列 |
| 8    | 矩阵多选题     | 行×列，每行可多选列 |
| 9    | 矩阵填空题     | 行×列，每格一空 |
| 10   | 量表题         | 线性量表（如 1–5、1–10）、NPS（0–10）、满意度等 |
| 11   | 排序题         | 拖拽或选择顺序排列选项 |
| 12   | 日期题         | 选择日期 |
| 13   | 时间题         | 选择时间（或日期+时间） |
| 14   | 上传文件题     | 单文件/多文件，格式与大小限制 |
| 15   | 描述说明       | 仅展示文字/图片，不收集答案 |
| 16   | 分页符         | 仅用于分页，无数据 |

### 2.3 题目通用设置
- 题目标题（题干）
- 题目说明/备注（选填，小字展示在题干下方）
- 是否必填
- 题目序号：自动编号或自定义（如 1、2、3 或 Q1、Q2）
- 选项/行/列内容可编辑、可增删、可排序
- 选项「其他」：勾选后显示一个「请说明」的填空

### 2.4 题型专属设置
- **单选/多选/下拉**  
  - 选项随机排列（是/否）  
  - 多选：最少勾选数、最多勾选数  
- **填空/多行填空**  
  - 占位提示文字  
  - 校验类型：无、数字、整数、邮箱、手机号、身份证、URL、自定义正则  
  - 最小/最大长度（可选）  
- **矩阵题**  
  - 行与列可自定义、可随机  
  - 矩阵单选可设置「每行必选」或允许不选  
- **量表题**  
  - 刻度类型：1–5、1–10、0–10（NPS）、满意程度（非常不满意–非常满意）等  
  - 左/右端点文案可编辑  
- **排序题**  
  - 选项随机（是/否）  
- **上传文件题**  
  - 允许文件类型（如图片/PDF/Word）、单文件大小上限、最多文件数  

### 2.5 逻辑跳题
- 单选题/下拉单选：每个选项可设置「跳转到第 N 题」或「结束答卷」
- 多选题：可选「选中某选项时跳转」或「选中某选项组合时跳转」（实现复杂度高，可二期）
- 被跳过的题目不展示、不参与题号连续显示（展示时题号可重排或保持原号按逻辑隐藏）

### 2.6 问卷级设置
- **分页**  
  - 不分页（一页展示全部）  
  - 按分页符分页  
  - 每 N 题一页  
- **时间限制**  
  - 开始时间、结束时间（到点自动开始/结束）  
  - 单次填写限时（如 10 分钟内提交，可选）  
- **回收限制**  
  - 最大回收份数（达到后自动停止或提示「已满」）  
- **防重复填写**  
  - 不限制  
  - 同一设备（Cookie/本地标识）仅能填一次  
  - 同一登录用户仅能填一次（需填写者登录，可选功能）  
  - 同一 IP 在 N 分钟内仅能填一次（可选）  
- **提交设置**  
  - 提交成功后的感谢语  
  - 提交后跳转链接（选填）  
  - 是否允许提交后查看/分享结果（选填）  

### 2.7 外观与展示
- 主题色（如主色、按钮色）
- 字体、字号（可选）
- 是否显示进度条（按页或按题）
- 题目编号样式：数字 1.2.3 / 字母 A.B.C / 无编号等
- 移动端适配：填写页在手机上的布局与字体

### 2.8 题目与问卷操作
- 题目：新增、复制、删除、上移/下移、从题库或模板插入（若做题库）
- 问卷：保存草稿、发布（开始回收）、暂停回收、结束问卷、复制问卷、删除问卷

---

## 三、发放与回收

### 3.1 发放方式
- **链接**  
  - 永久链接（与问卷绑定）  
  - 短链接（如 /s/xxxx）  
- **二维码**  
  - 生成问卷链接对应的二维码图片，可下载  
- **嵌入**  
  - 提供 iframe 嵌入代码，可设宽高  
  - 可选：在新窗口打开链接  

### 3.2 回收控制（与 2.6 对应）
- 限时开始/结束：到点自动开放/关闭
- 最大回收份数：达到后关闭或提示
- 防重复规则：设备/用户/IP 策略，未通过时提示「已填写过」或「请 X 分钟后再试」

### 3.3 填写端体验
- 填写页：根据逻辑跳题与分页展示题目，必填校验、格式校验
- 提交前确认（可选）：弹窗「确定提交？」或直接提交
- 提交成功：展示感谢语、跳转链接（若配置）
- 提交失败：网络错误或校验失败时提示

### 3.4 回收监控（创建者端）
- 实时或近实时回收数量
- 列表/仪表盘：今日新增、总回收数、状态（收集中/已结束/已满）

---

## 四、数据与统计

### 4.1 答卷列表
- 列表字段：提交时间、IP（可选）、设备/标识（可选）、部分题目答案摘要（可选）
- 操作：单条查看详情、删除、标记无效（不计入统计）
- 筛选：按时间范围、按题目答案筛选（如「第 2 题选了 A 的答卷」）
- 分页与导出当前筛选结果

### 4.2 单题统计
- **单选/多选/下拉**  
  - 选项计数、占比  
  - 图表：饼图、柱状图（可切换）  
- **填空/多行填空**  
  - 答案列表（可分页）、词频/词云（可选）  
- **矩阵题**  
  - 每行各选项的计数/占比，表格或图  
- **量表题**  
  - 各分值计数、平均分、分布图（柱状/折线）  
- **排序题**  
  - 各选项的平均排名或排名分布  
- **日期/时间**  
  - 分布（按日/周/月汇总）  
- **上传文件**  
  - 文件列表与下载  

### 4.3 交叉分析
- 选择两个题目（如 A、B）
- 以 A 的选项为维度，展示 B 在各维度下的统计（如 A 选「男」时 B 的选项分布）
- 展示形式：表格、堆叠柱状图等

### 4.4 导出
- **Excel**  
  - 每行一条答卷，每列一题（多选/矩阵需约定列格式，如多列或合并单元格）  
  - 含提交时间、IP 等元数据（可选）  
- **CSV**  
  - 与 Excel 列一致，便于其他工具导入  
- **SPSS (.sav)**  
  - 可选功能，满足学术统计需求  

### 4.5 数据安全与隐私
- 创建者可随时清空答卷或删除单条（含导出记录若做了审计）
- 若支持「填写者登录」，需在隐私说明中约定数据用途与保留期限（产品层面）

---

## 五、模板与复用

### 5.1 问卷模板
- 系统内置模板：如满意度、NPS、报名表、考试测验等，用户可基于模板创建问卷
- 用户自定义模板：将已有问卷存为「我的模板」，下次从模板新建
- 模板市场（可选）：公开模板库、分类、使用次数展示

### 5.2 复制问卷
- 在本账号下复制整份问卷（含题目、设置、逻辑跳题），生成新问卷（草稿），不复制答卷数据

### 5.3 题库（可选）
- 用户可把单题保存到个人题库，新建问卷时从题库选题插入
- 题库分类、标签、搜索

---

## 六、其他与全局

### 6.1 问卷状态与生命周期
- 草稿：仅创建者可见、可编辑，不可填写
- 收集中：按「开始时间」开放填写，受「结束时间/最大份数」约束
- 已结束：不可再提交，可查看/导出数据、复制、重新发布（可选）

### 6.2 异常与限制
- 问卷被删除：填写链接提示「问卷不存在或已删除」
- 未到开始时间 / 已过结束时间：提示具体原因
- 回收已满：提示「回收已满，感谢关注」
- 防重复未通过：统一提示文案，可配置

### 6.3 管理端（可选）
- 平台管理员：用户列表、问卷列表、违规下架、系统公告
- 基础数据统计：总用户数、总问卷数、总回收数

### 6.4 帮助与说明
- 填写说明/隐私说明（可配置在问卷说明或全局页脚）
- 常见问题、联系客服（若做）

---

## 七、功能优先级建议（供排期参考）

**P0（首版必做）**  
- 用户注册/登录、个人中心、我的问卷  
- 问卷 CRUD，题型：单选、多选、填空、多行填空、量表、描述、分页  
- 题目必填、选项随机（单选/多选）  
- 问卷设置：标题/说明、感谢语、开始/结束时间、最大回收数  
- 填写链接与二维码、填写页与提交、防重复（同一设备）  
- 答卷列表、单题统计（饼图/柱状图）、导出 Excel/CSV  

**P1（第二版）**  
- 逻辑跳题（单选/下拉）  
- 题型：下拉单选/多选、矩阵单选、排序、日期、时间  
- 填空校验、多选最少/最多项  
- 嵌入 iframe、提交后跳转链接  
- 单题统计增强、交叉分析  
- 复制问卷、问卷状态（草稿/收集中/已结束）  

**P2（后续迭代）**  
- 上传文件题、矩阵多选/填空、NPS/满意度量表细化  
- 外观主题、进度条、编号样式  
- 同一用户防重复、IP 限频  
- 模板与模板市场、题库  
- 导出 SPSS、答卷筛选按题  

以上为完整功能整理，实现时按模块与优先级拆任务即可。
